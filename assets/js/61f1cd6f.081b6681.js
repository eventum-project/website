"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4310],{988:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>l,metadata:()=>a,toc:()=>o});var i=s(4848),t=s(8453);const l={},r="Configuration file",a={id:"configuring/config_file/index",title:"Configuration file",description:"Structure",source:"@site/docs/configuring/config_file/index.md",sourceDirName:"configuring/config_file",slug:"/configuring/config_file/",permalink:"/website/docs/configuring/config_file/",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"configuringSidebar",next:{title:"Tags",permalink:"/website/docs/configuring/tags/"}},c={},o=[{value:"Structure",id:"structure",level:2},{value:"Example",id:"example",level:2},{value:"Tokens",id:"tokens",level:2},{value:"Plugin parameters",id:"plugin-parameters",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"configuration-file",children:"Configuration file"}),"\n",(0,i.jsx)(n.h2,{id:"structure",children:"Structure"}),"\n",(0,i.jsx)(n.p,{children:"Eventum configuration file is a yaml file that consists of three sections:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Input plugin section"}),"\n",(0,i.jsx)(n.li,{children:"Event plugin section"}),"\n",(0,i.jsx)(n.li,{children:"Output plugins section"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The generic structure of the file is the following:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"// highlight-next-line\ninput:\n  - <input plugin name>:\n      <parameter name>: <value>\n      [tags: <tags list>]\n      ...\n  - ...\n\n// highlight-next-line\nevent:\n  params: <parameters>\n  \n  samples:\n    <sample name>:\n      type: csv | items\n      source: <filename> | <list[item]> \n    ...\n  \n  mode: { all | any | chance | spin }\n  \n  templates:\n    - <template alias>:\n        template: <template path>\n        [chance: <chance>]\n    ...\n\n// highlight-next-line\noutput:\n  - <output plugin name>:\n      <parameter name>: <value>\n      ...\n  - ...\n"})}),"\n",(0,i.jsx)(n.p,{children:"Configuration can have multiple input plugins and multiple output plugins. Specifying the name of event plugin is omitted since Jinja event plugin is the only one and it's used by default, so in event section we see its parameters straightaway."}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.p,{children:"Example simple config looks like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'input:\n  - cron:       1\ufe0f\u20e3\n      expression: "*/5 * * * *"\n      count: 1\n      tags: ["basic"]\n\nevent:\n  params: { "env": "dev", "status": true }    2\ufe0f\u20e3\n  \n  samples:\n    users:      3\ufe0f\u20e3\n      type: csv\n      source: "users.csv"\n    hosts:      4\ufe0f\u20e3\n      type: items\n      source: ["msk-dc", "msk-01", "msk-02"]\n  \n  mode: all     5\ufe0f\u20e3\n  \n  templates:    6\ufe0f\u20e3\n    - logon:\n        template: "logon_events.json.jinja"\n\noutput:         7\ufe0f\u20e3\n  - file:\n      path: "/app/logs/events.log"\n      format: "json-lines"\n  - stdout:\n      format: "original"\n'})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["As input plugin we use only ",(0,i.jsx)(n.code,{children:"cron"})," with parameters ",(0,i.jsx)(n.code,{children:"expression"})," and ",(0,i.jsx)(n.code,{children:"count"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Parameters ",(0,i.jsx)(n.code,{children:"env"})," and ",(0,i.jsx)(n.code,{children:"status"})," will be accessible in templates."]}),"\n",(0,i.jsxs)(n.li,{children:["Sample ",(0,i.jsx)(n.code,{children:"users"})," can be used in template with data defined in csv file."]}),"\n",(0,i.jsxs)(n.li,{children:["Sample ",(0,i.jsx)(n.code,{children:"hosts"})," can be used in template with data defined directly in configuration."]}),"\n",(0,i.jsx)(n.li,{children:"All specified templates will be rendered on input plugin trigger."}),"\n",(0,i.jsx)(n.li,{children:"One template is specified to be rendered."}),"\n",(0,i.jsx)(n.li,{children:"Rendered events will be written to file and duplicated to stdout."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"tokens",children:"Tokens"}),"\n",(0,i.jsx)(n.p,{children:"You can parametrize your configuration and hide sensitive data like passwords using tokens."}),"\n",(0,i.jsx)(n.p,{children:"There are two types of tokens:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"params"})," - passed as CLI argument"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"secrets"})," - stored in keyring"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["In configuration file you can refer them using ",(0,i.jsx)(n.code,{children:"${<token name>}"})," construction."]}),"\n",(0,i.jsx)(n.p,{children:"Example usage:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'output:\n  - opensearch:\n      hosts: ["https://localhost:9200"]\n      index: "test"\n      // highlight-next-line\n      user: "${params.user}"\n      // highlight-next-line\n      password: "${secrets.opensearch_password}"\n      verify_ssl: false\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In the above example it is expected you have passed ",(0,i.jsx)(n.code,{children:"user"})," parameter as argument like:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'eventum ... --params \'{"user": "admin"}\'\n'})}),"\n",(0,i.jsxs)(n.p,{children:["and set ",(0,i.jsx)(n.code,{children:"opensearch_password"})," value to keyring:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"keyring set eventum opensearch_password\n"})}),"\n",(0,i.jsx)(n.h2,{id:"plugin-parameters",children:"Plugin parameters"}),"\n",(0,i.jsxs)(n.p,{children:["All plugin parameters are documented in the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/website/docs/plugins/",children:"Plugins"})})," part."]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var i=s(6540);const t={},l=i.createContext(t);function r(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);